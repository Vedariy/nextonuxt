<script setup lang="ts">
// Nuxt routing ‚âà Next.js App Router
// File-based routing - –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è!

const route = useRoute()
const router = useRouter()

const goToAbout = () => {
  router.push('/about')
}
</script>

<template>
  <div class="space-y-8">
    <ComparisonCard title="File-based Routing" quizKey="routing-file-based">
      <template #react>
        <pre class="text-sm">
// Next.js App Router
app/
‚îú‚îÄ‚îÄ page.tsx          ‚Üí /
‚îú‚îÄ‚îÄ about/
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx      ‚Üí /about
‚îú‚îÄ‚îÄ blog/
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx      ‚Üí /blog
‚îÇ   ‚îî‚îÄ‚îÄ [slug]/
‚îÇ       ‚îî‚îÄ‚îÄ page.tsx  ‚Üí /blog/:slug
‚îî‚îÄ‚îÄ [...slug]/
    ‚îî‚îÄ‚îÄ page.tsx      ‚Üí catch-all</pre>
      </template>
      <template #vue>
        <pre class="text-sm">
// Nuxt 3
pages/
‚îú‚îÄ‚îÄ index.vue         ‚Üí /
‚îú‚îÄ‚îÄ about.vue         ‚Üí /about
‚îú‚îÄ‚îÄ blog/
‚îÇ   ‚îú‚îÄ‚îÄ index.vue     ‚Üí /blog
‚îÇ   ‚îî‚îÄ‚îÄ [slug].vue    ‚Üí /blog/:slug
‚îî‚îÄ‚îÄ [...slug].vue     ‚Üí catch-all</pre>
      </template>
      <template #notes>
        <ul class="list-disc pl-4 space-y-1">
          <li>–û–±–µ —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç file-based routing</li>
          <li>Next: <code>[param]</code> = Nuxt: <code>[param]</code></li>
          <li>Next: <code>page.tsx</code> = Nuxt: <code>index.vue</code> –∏–ª–∏ <code>name.vue</code></li>
          <li>Catch-all: <code>[...slug]</code> –≤ –æ–±–æ–∏—Ö</li>
        </ul>
      </template>
    </ComparisonCard>

    <ComparisonCard title="Navigation" quizKey="routing-navigation">
      <template #react>
        <pre class="text-sm">
// Next.js
import Link from 'next/link'
import { useRouter } from 'next/navigation'

// –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ
&lt;Link href="/about"&gt;About&lt;/Link&gt;

// –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ
const router = useRouter()
router.push('/about')
router.replace('/home')
router.back()</pre>
      </template>
      <template #vue>
        <pre class="text-sm">
&lt;!-- Nuxt --&gt;
&lt;!-- –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ --&gt;
&lt;NuxtLink to="/about"&gt;About&lt;/NuxtLink&gt;

&lt;!-- –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ --&gt;
&lt;script setup&gt;
const router = useRouter()
router.push('/about')
router.replace('/home')
router.back()
&lt;/script&gt;</pre>
      </template>
      <template #notes>
        <ul class="list-disc pl-4 space-y-1">
          <li><code>Link</code> ‚Üí <code>NuxtLink</code></li>
          <li><code>href</code> ‚Üí <code>to</code></li>
          <li><code>useRouter</code> - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π API</li>
          <li>NuxtLink –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ prefetch</li>
        </ul>
      </template>
    </ComparisonCard>

    <!-- Live Demo -->
    <LiveDemoCard title="Routing">
      <div class="space-y-4">
        <div class="p-3 bg-palantir-light-2 dark:bg-palantir-dark-2 rounded border border-palantir-light-3 dark:border-palantir-dark-3 flex items-center gap-2 text-sm">
          <span class="text-palantir-gray-1 dark:text-palantir-gray-3">Current route:</span>
          <code class="text-palantir-orange font-mono bg-palantir-light-3 dark:bg-palantir-dark-1 px-2 py-0.5 rounded border border-palantir-light-4 dark:border-palantir-dark-3">{{ route.path }}</code>
        </div>
        
        <div class="flex flex-wrap gap-2">
          <NuxtLink 
            to="/about"
            class="bp-button bp-button-primary"
          >
            Go to /about (NuxtLink)
          </NuxtLink>
          
          <button
            class="bp-button text-palantir-text-dark dark:text-palantir-gray-1 bg-palantir-light-2 dark:bg-palantir-dark-2 border border-palantir-light-3 dark:border-palantir-dark-3 hover:bg-palantir-light-3 dark:hover:bg-palantir-dark-3"
            @click="goToAbout"
          >
            Go to /about (programmatic)
          </button>
          
          <NuxtLink 
            to="/blog/my-post"
            class="bp-button text-palantir-text-dark dark:text-palantir-gray-1 bg-palantir-light-2 dark:bg-palantir-dark-2 border border-palantir-light-3 dark:border-palantir-dark-3 hover:bg-palantir-light-3 dark:hover:bg-palantir-dark-3"
          >
            Go to /blog/my-post
          </NuxtLink>
        </div>
      </div>
    </LiveDemoCard>

    <ComparisonCard title="Route Parameters" quizKey="routing-params">
      <template #react>
        <pre class="text-sm">
// Next.js 15+ (Server Component)
export default async function Page({ 
  params,
  searchParams
}: { 
  params: Promise&lt;{ slug: string }&gt;
  searchParams: Promise&lt;{ [key: string]: string }&gt;
}) {
  const { slug } = await params
  const { q } = await searchParams // Query params
  
  return &lt;div&gt;Slug: {slug}, Search: {q}&lt;/div&gt;
}

// Client Component
import { useParams, useSearchParams } from 'next/navigation'
const params = useParams()
const searchParams = useSearchParams()</pre>
      </template>
      <template #vue>
        <pre class="text-sm" v-pre>
&lt;!-- Nuxt: pages/blog/[slug].vue --&gt;
&lt;script setup&gt;
const route = useRoute()

// ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ computed –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
// –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ /blog/1 -> /blog/2
const slug = computed(() => route.params.slug)
const query = computed(() => route.query.q)

// Watcher –¥–ª—è —Å–∞–π–¥-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤
watch(() => route.params.slug, (newSlug) => {
  console.log('Changed to:', newSlug)
})
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    Slug: {{ slug }}
    Search: {{ query }}
  &lt;/div&gt;
&lt;/template&gt;</pre>
      </template>
      <template #notes>
        <ul class="list-disc pl-4 space-y-1">
          <li><strong>Next.js 15+:</strong> <code>params</code> –∏ <code>searchParams</code> - —ç—Ç–æ <strong>Promises</strong></li>
          <li><strong>Vue:</strong> <code>route</code> —Ä–µ–∞–∫—Ç–∏–≤–µ–Ω, –Ω–æ destructuring –ª–æ–º–∞–µ—Ç —Å–≤—è–∑—å</li>
          <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <code>computed</code> –∏–ª–∏ `route.params.id` –≤ template</li>
          <li>Vue –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</li>
        </ul>
      </template>
    </ComparisonCard>

    <ComparisonCard title="Layouts" quizKey="routing-layouts">
      <template #react>
        <pre class="text-sm">
// Next.js - layout.tsx
// app/layout.tsx
export default function RootLayout({
  children
}: {
  children: React.ReactNode
}) {
  return (
    &lt;html&gt;
      &lt;body&gt;
        &lt;Header /&gt;
        {children}
        &lt;Footer /&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  )
}</pre>
      </template>
      <template #vue>
        <pre class="text-sm">
&lt;!-- Nuxt - layouts/default.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;Header /&gt;
    &lt;slot /&gt;
    &lt;Footer /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;!-- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å—Ç—Ä–∞–Ω–∏—Ü–µ --&gt;
&lt;script setup&gt;
definePageMeta({
  layout: 'custom' // –∏–ª–∏ 'default'
})
&lt;/script&gt;</pre>
      </template>
      <template #notes>
        <ul class="list-disc pl-4 space-y-1">
          <li><code>layouts/</code> –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</li>
          <li><code>&lt;slot /&gt;</code> –≤–º–µ—Å—Ç–æ <code>{children}</code></li>
          <li><code>definePageMeta</code> –¥–ª—è –≤—ã–±–æ—Ä–∞ layout</li>
          <li>Default layout –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</li>
        </ul>
      </template>
    </ComparisonCard>

    <ComparisonCard title="Nested Layouts (State Persistence)" quizKey="routing-nested">
      <template #react>
        <pre class="text-sm">
// Next.js: app/dashboard/layout.tsx
export default function DashboardLayout({
  children
}: { children: ReactNode }) {
  // üü¢ State —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
  // –º–µ–∂–¥—É /dashboard/settings –∏ /dashboard/profile
  const [count, setCount] = useState(0)

  return (
    &lt;div&gt;
      &lt;nav&gt;
        &lt;button onClick={() => setCount(c => c + 1)}&gt;
          Count: {count}
        &lt;/button&gt;
      &lt;/nav&gt;
      {children}
    &lt;/div&gt;
  )
}</pre>
      </template>
      <template #vue>
        <pre class="text-sm" v-pre>
&lt;!-- Nuxt: pages/dashboard.vue --&gt;
&lt;script setup&gt;
// üü¢ State —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø–æ–∫–∞ –º—ã –≤–Ω—É—Ç—Ä–∏ /dashboard/*
const count = ref(0)
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;nav&gt;
      &lt;button @click="count++"&gt;
        Count: {{ count }}
      &lt;/button&gt;
    &lt;/nav&gt;
    
    &lt;!-- –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –∑–¥–µ—Å—å --&gt;
    &lt;NuxtPage /&gt;
  &lt;/div&gt;
&lt;/template&gt;</pre>
      </template>
      <template #notes>
        <ul class="list-disc pl-4 space-y-1">
          <li><strong>Persistence:</strong> Layout –Ω–µ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ –¥–æ—á–µ—Ä–Ω–∏—Ö —Ä–æ—É—Ç–æ–≤</li>
          <li>–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è: Sidebar, Player, Search State</li>
          <li>–í Nuxt —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π <code>pages/parent.vue</code> –¥–µ–π—Å—Ç–≤—É–µ—Ç –∫–∞–∫ Layout</li>
        </ul>
      </template>
    </ComparisonCard>

    <ComparisonCard title="Templates & Re-rendering" quizKey="routing-templates">
      <template #react>
        <pre class="text-sm">
// Next.js: app/dashboard/template.tsx
// üî¥ Remounts on navigation!

export default function Template({ 
  children 
}: { children: ReactNode }) {
  // State —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ
  const [count, setCount] = useState(0)

  return (
    &lt;div className="animate-in"&gt;
      {children}
    &lt;/div&gt;
  )
}</pre>
      </template>
      <template #vue>
        <pre class="text-sm" v-pre>
&lt;!-- Nuxt: –ê–Ω–∞–ª–æ–≥ template.tsx --&gt;
&lt;!-- pages/dashboard.vue --&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;!-- üî¥ Force remount —Å –ø–æ–º–æ—â—å—é key --&gt;
    &lt;NuxtPage :page-key="route => route.fullPath" /&gt;
    
    &lt;!-- –ò–ª–∏ –¥–ª—è —Ç—Ä–∞–Ω–∑–∏—Ü–∏–π --&gt;
    &lt;NuxtPage 
      :transition="{ 
        name: 'fade', 
        mode: 'out-in' 
      }" 
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;</pre>
      </template>
      <template #notes>
        <ul class="list-disc pl-4 space-y-1">
          <li><strong>Next.js <code>template.tsx</code>:</strong> –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∏–Ω—Å—Ç–∞–Ω—Å –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏</li>
          <li><strong>Nuxt:</strong> –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–∫–∞–∫ Layout)</li>
          <li>–î–ª—è –ø–æ–≤–µ–¥–µ–Ω–∏—è "Template" –≤ Nuxt: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ <code>key</code> –Ω–∞ <code>&lt;NuxtPage&gt;</code></li>
          <li>–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è: –∞–Ω–∏–º–∞—Ü–∏–π –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞, —Å–±—Ä–æ—Å–∞ —Å–∫—Ä–æ–ª–ª–∞, —Ç—Ä–µ–∫–∏–Ω–≥–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</li>
        </ul>
      </template>
    </ComparisonCard>

    <BestPractices :practices="[
      {
        title: 'Route Params Reactivity',
        description: '–í Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è. –ï—Å–ª–∏ –≤—ã –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ —Å /users/1 –Ω–∞ /users/2, `onMounted` –ù–ï —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `watch(() => route.params.id)` –∏–ª–∏ `computed` –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.',
        type: 'warning'
      },
      {
        title: 'Typed Routing',
        description: '–í Nuxt –≤–∫–ª—é—á–µ–Ω `experimental.typedPages`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `NuxtLink` —Å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø—É—Ç—è–º–∏ –∏–ª–∏ `navigateTo({ name: \'user-id\', params: { id: 1 } })` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤.',
        type: 'success'
      },
      {
        title: 'Middleware Usage',
        description: '–î–ª—è –∑–∞—â–∏—Ç—ã —Ä–æ—É—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `definePageMeta({ middleware: [\'auth\'] })`. –≠—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ, —á–µ–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–Ω—É—Ç—Ä–∏ `setup` –∏–ª–∏ `onMounted`.',
        type: 'info'
      }
    ]" />
  </div>
</template>
