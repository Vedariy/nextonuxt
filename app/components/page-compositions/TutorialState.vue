<script setup lang="ts">
// ref() ‚âà useState() - –¥–ª—è –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤
// reactive() ‚âà useState({}) - –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤

const count = ref(0)
const user = reactive({
  name: 'Viktor',
  age: 30
})

const increment = () => {
  count.value++ // .value –¥–ª—è ref!
}

const updateName = () => {
  user.name = 'Updated Viktor' // –±–µ–∑ .value –¥–ª—è reactive
}
</script>

<template>
  <div class="space-y-8">
    <ComparisonCard title="useState ‚Üí ref()" quizKey="state-ref">
      <template #react>
        <pre class="text-sm">
// React - useState
const [count, setCount] = useState(0)

const increment = () => {
  setCount(count + 1)
  // –∏–ª–∏
  setCount(prev => prev + 1)
}</pre>
      </template>
      <template #vue>
        <pre class="text-sm" v-pre>// Vue - ref()
const count = ref(0)

const increment = () => {
  count.value++ // ‚ö†Ô∏è .value –≤ JS &lt;script&gt;!
}

// –≤ template –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ unwrap `value`
&lt;span&gt;{{ count }}&lt;/span&gt;</pre>
      </template>
      <template #notes>
        <ul class="list-disc pl-4 space-y-1">
          <li><code>ref()</code> –¥–ª—è –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ (string, number, boolean)</li>
          <li><strong>–í script:</strong> –Ω—É–∂–µ–Ω <code>.value</code></li>
          <li><strong>–í template:</strong> –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π unwrap</li>
          <li>–†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" - –Ω–µ—Ç —Å–µ—Ç—Ç–µ—Ä–∞</li>
        </ul>
      </template>
    </ComparisonCard>

    <!-- Live Demo: ref -->
    <LiveDemoCard title="ref()">
      <div class="flex items-center gap-4">
        <button
          class="bp-button bp-button-primary"
          @click="increment"
        >
          Count: {{ count }}
        </button>
        <span class="text-palantir-gray-0 text-sm">‚Üê Click me!</span>
      </div>
    </LiveDemoCard>

    <ComparisonCard title="useState({}) ‚Üí reactive({})" quizKey="state-reactive">
      <template #react>
        <pre class="text-sm">
// React - useState —Å –æ–±—ä–µ–∫—Ç–æ–º
const [user, setUser] = useState({
  name: 'Viktor',
  age: 30
})

const updateName = () => {
  setUser(prev => ({
    ...prev,
    name: 'New Name'
  }))
}</pre>
      </template>
      <template #vue>
        <pre class="text-sm">
// Vue - reactive()
const user = reactive({
  name: 'Viktor',
  age: 30
})

const updateName = () => {
  user.name = 'New Name' // –Ω–∞–ø—Ä—è–º—É—é!
}</pre>
      </template>
      <template #notes>
        <ul class="list-disc pl-4 space-y-1">
          <li><code>reactive()</code> –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –º–∞—Å—Å–∏–≤–æ–≤</li>
          <li>–ë–µ–∑ <code>.value</code> - –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º</li>
          <li>–ú—É—Ç–∞—Ü–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã</li>
          <li>‚ö†Ô∏è –ù–µ–ª—å–∑—è –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∏—Ç—å –≤–µ—Å—å –æ–±—ä–µ–∫—Ç (–ø–æ—Ç–æ–º—É —á—Ç–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞)</li>
        </ul>
      </template>
    </ComparisonCard>

    <!-- Live Demo: reactive -->
    <LiveDemoCard title="reactive()">
      <div class="text-palantir-text-dark dark:text-palantir-gray-1 p-3 bg-palantir-light-2 dark:bg-palantir-dark-2 rounded border border-palantir-light-3 dark:border-palantir-dark-3 font-mono text-sm">
        User: <strong class="text-palantir-blue">{{ user.name }}</strong>, Age: <span class="text-palantir-accent">{{ user.age }}</span>
      </div>
      <button
        class="bp-button bp-button-primary"
        @click="updateName"
      >
        Update Name
      </button>
    </LiveDemoCard>

    <ComparisonCard title="ref() vs reactive() - –∫–æ–≥–¥–∞ —á—Ç–æ?" quizKey="state-ref-vs-reactive">
      <template #react>
        <pre class="text-sm">
// –í React –≤—Å–µ–≥–¥–∞ useState
// –†–∞–∑–Ω–∏—Ü—ã –Ω–µ—Ç - –≤—Å–µ–≥–¥–∞ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ

const [value, setValue] = useState(0)
const [obj, setObj] = useState({...})</pre>
      </template>
      <template #vue>
        <pre class="text-sm">
// ref() - –ø—Ä–∏–º–∏—Ç–∏–≤—ã, single values
const count = ref(0)
const isLoading = ref(false)

// reactive() - –æ–±—ä–µ–∫—Ç—ã, —Ñ–æ—Ä–º—ã
const form = reactive({
  email: '',
  password: ''
})

// üí° –°–æ–≤–µ—Ç: –∏—Å–ø–æ–ª—å–∑—É–π ref() –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</pre>
      </template>
      <template #notes>
        <ul class="list-disc pl-4 space-y-1">
          <li>üéØ <code>ref()</code> - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä</li>
          <li><code>reactive()</code> - —É–¥–æ–±–µ–Ω –¥–ª—è —Ñ–æ—Ä–º</li>
          <li><code>reactive()</code> —Ç–µ—Ä—è–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–∏ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏</li>
          <li>–ò—Å–ø–æ–ª—å–∑—É–π <code>toRefs()</code> –¥–ª—è –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏ reactive</li>
        </ul>
      </template>
    </ComparisonCard>

    <ComparisonCard title="–î–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è reactive ‚Üí toRefs()" quizKey="state-torefs">
      <template #react>
        <pre class="text-sm">// React - –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è useState
const [user, setUser] = useState({ 
  name: 'Alex', 
  email: 'alex@example.com' 
})

// –ü—Ä–æ—Å—Ç–æ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∏—Ä—É–µ–º
const { name, email } = user
</pre>
      </template>
      <template #vue>
        <pre class="text-sm" v-pre>// Vue - toRefs() –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
const user = reactive({ 
  name: 'Alex', 
  email: 'alex@example.com' 
})

// ‚ùå –ü–æ—Ç–µ—Ä—è–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å!
// const { name, email } = user

// ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
const { name, email } = toRefs(user)

// —Ç–µ–ø–µ—Ä—å name –∏ email - —ç—Ç–æ ref()
console.log(name.value) // 'Alex'</pre>
      </template>
      <template #notes>
        <ul class="list-disc pl-4 space-y-1">
          <li><code>toRefs()</code> –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–∞ reactive –æ–±—ä–µ–∫—Ç–∞ –≤ ref</li>
          <li>–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–∏ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏</li>
          <li>–£–¥–æ–±–Ω–æ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Å–≤–æ–π—Å—Ç–≤ –≤ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</li>
          <li>–ö–∞–∂–¥–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º ref</li>
          <li>–í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è reactive (–Ω–µ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ ref)</li>
        </ul>
      </template>
    </ComparisonCard>

    <ComparisonCard title="–í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤ toRefs()" quizKey="state-nested-torefs">
      <template #react>
        <pre class="text-sm">// React - –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
const [user, setUser] = useState({ 
  name: 'Alex', 
  profile: {
    email: 'alex@example.com',
    settings: {
      theme: 'dark'
    }
  }
})

// –î–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤
const { name, profile } = user
const { email } = profile</pre>
      </template>
      <template #vue>
        <pre class="text-sm" v-pre>// Vue - toRefs() —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏
const user = reactive({ 
  name: 'Alex', 
  profile: {
    email: 'alex@example.com',
    settings: {
      theme: 'dark'
    }
  }
})

// ‚úÖ name —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è ref, profile –æ—Å—Ç–∞–µ—Ç—Å—è reactive
const { name, profile } = toRefs(user)

// profile - —ç—Ç–æ reactive –æ–±—ä–µ–∫—Ç, –Ω–µ ref!
// –ú–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ –≤–ª–æ–∂–µ–Ω–Ω—ã–º —Å–≤–æ–π—Å—Ç–≤–∞–º
console.log(profile.email)        // 'alex@example.com'
console.log(profile.settings.theme) // 'dark'

// –ò–ª–∏ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ reactive –æ–±—ä–µ–∫—Ç—ã
const { email, settings } = profile
console.log(settings.theme) // 'dark'</pre>
      </template>
      <template #notes>
        <ul class="list-disc pl-4 space-y-1">
          <li><code>toRefs()</code> –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –≤ ref</li>
          <li>–í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è reactive</li>
          <li>–ú–æ–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –≤–ª–æ–∂–µ–Ω–Ω—ã–º —Å–≤–æ–π—Å—Ç–≤–∞–º</li>
          <li>–í–ª–æ–∂–µ–Ω–Ω—ã–µ reactive –æ–±—ä–µ–∫—Ç—ã —Ç–æ–∂–µ –º–æ–∂–Ω–æ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å</li>
          <li>–ì–ª—É–±–∏–Ω–∞ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö</li>
        </ul>
      </template>
    </ComparisonCard>

    <BestPractices :practices="[
      {
        title: 'Ref vs Reactive',
        description: '–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ref` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –æ—á–µ–≤–∏–¥–Ω—ã–º, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (—á–µ—Ä–µ–∑ `.value`), –∏ –∏–∑–±–µ–≥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –æ–±—ä–µ–∫—Ç–∞ —Ü–µ–ª–∏–∫–æ–º.',
        type: 'success'
      },
      {
        title: 'Destructuring Safety',
        description: '–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç `reactive()` –∏–ª–∏ `props` –Ω–∞–ø—Ä—è–º—É—é ‚Äî —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è! –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `toRefs(props)` –∏–ª–∏ `toRef(props, \'key\')`.',
        type: 'warning'
      },
      {
        title: 'Shallow Refs',
        description: '–î–ª—è –±–æ–ª—å—à–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–æ–ª—å—à–∏–µ —Å–ø–∏—Å–∫–∏ –∏–ª–∏ –≥—Ä–∞—Ñ–∏–∫–∏), –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –≥–ª—É–±–æ–∫–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `shallowRef` –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.',
        type: 'info'
      }
    ]" />
  </div>
</template>
